@import "../node_modules/bootstrap/scss/functions";
@import "../node_modules/bootstrap/scss/variables";
@import "../node_modules/bootstrap/scss/mixins";

// =============== Variables ===============

// --------------- Defaults ---------------

$default-color: #bebebe;
$default-bg: #222;
$default-dark-bg: #181818;
$default-header-bg: #202020;
$default-border: #404040;

// --------------- Customized ---------------

$color: $default-color;
$bg: $default-bg;

$window-color: $default-color;
$window-bg: $default-bg;
$window-header-color: $default-color;
$window-header-bg: $default-header-bg;
$window-border: $default-border;

$card-color: $default-color;
$card-bg: $default-dark-bg;
$card-header-color: $default-color;
$card-header-bg: $default-header-bg;
$card-hover-bg: $default-bg;
$card-border: $default-border;

$dark-list-group-color: null !default;
$dark-list-group-bg: $black !default;
$dark-list-group-border-color: rgba($black, .125) !default;
$dark-list-group-hover-bg: $gray-900 !default;
$dark-list-group-active-color: $component-active-color !default;
$dark-list-group-active-bg: $component-active-bg !default;
$dark-list-group-active-border-color: $dark-list-group-active-bg !default;
$dark-list-group-disabled-color: $gray-400 !default;
$dark-list-group-disabled-bg: $dark-list-group-bg !default;
$dark-list-group-action-color: $gray-300 !default;
$dark-list-group-action-hover-color: $dark-list-group-action-color !default;
$dark-list-group-action-active-color: $default-color !default;
$dark-list-group-action-active-bg: $gray-800 !default;

$form-color: $default-color;
$form-placeholder-color: #666;
$form-bg: #171717;
$form-hover-bg: #242424;
$form-border: $default-border;

$alert-color-level: -10;
$alert-bg-level: 8;
$alert-border-level: 6;

$form-addon-color: $default-color;
$form-addon-bg: $default-header-bg;

@mixin darkmode {
	color: $color;
	background-color: $bg;

	.bg-darkmode-dark {
		background-color: #343a40 !important
	}

	.bg-darkmode-light {
		background-color: #f8f9fa !important;
	}

	.bg-darkmode-black {
		background-color: $bg !important;
	}

	// --------------- Typography ---------------

	pre {
		color: $color;
	}

	hr {
		border-top-color: $default-border;
	}

	// --------------- Images ---------------

	img.icon,
	svg.icon {
		filter: invert(1);
	}

	// --------------- Tables ---------------

	.table {
		color: $color;

		th, td {
			border-top-color: $default-border;
		}

		thead th, tbody + tbody {
			border-bottom-color: $default-border;
		}
	}

	.table-hover tbody tr:hover {
		color: $color;
	}

	.table-bordered {
		border-color: $default-border;

		th, td {
			border-color: $default-border;
		}
	}

	// --------------- List Groups ---------------

	.list-group-item-action {
		color: $dark-list-group-action-color;
		@include hover-focus() {
			color: $dark-list-group-action-hover-color;
			background-color: $dark-list-group-hover-bg;
		}
		&:active {
			color: $dark-list-group-action-active-color;
			background-color: $dark-list-group-action-active-bg;
		}
	}

	.list-group-item {
		color: $dark-list-group-color;
		background-color: $dark-list-group-bg;
		border-color: $dark-list-group-border-color;

		&.disabled,
		&:disabled {
			color: $dark-list-group-disabled-color;
			background-color: $dark-list-group-disabled-bg;
		}

		&.active {
			color: $dark-list-group-active-color;
			background-color: $dark-list-group-active-bg;
			border-color: $dark-list-group-active-border-color;
		}
	}

	@each $color, $value in $theme-colors {
		@include list-group-item-variant($color, theme-color-level($color, $alert-bg-level), theme-color-level($color, $alert-color-level));
	}

	// --------------- Buttons ---------------

	.dropdown-menu {
		background-color: $form-bg;
		border-color: $form-border;
	}

	.dropdown-item:not(:disabled):not(.disabled) {
		color: $form-color;
	}

	.dropdown-item:focus,
	.dropdown-item:hover {
		background-color: $form-hover-bg;
	}

	.dropdown-divider {
		border-top-color: $form-border;
	}

	// --------------- Jumbotron ---------------

	.jumbotron {
		color: $card-color;
		background-color: $card-bg;
		border-color: $card-border;
	}

	// --------------- Cards ---------------

	.card {
		color: $card-color;
		background-color: $card-bg;
		border-color: $card-border;
	}

	.card-header,
	.card-footer {
		color: $card-header-color;
		background-color: $card-header-bg;
		border-top-color: $card-border;
		border-bottom-color: $card-border;
	}

	// --------------- Forms ---------------

	.form-control {
		color: $form-color;
		background-color: $form-bg;
		border-color: $form-border;
	}

	.form-control-plaintext {
		color: $form-color;
	}

	.custom-select {
		color: $form-color;
		background-color: $form-bg;
		border-color: $form-border;
		background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3e%3cpath fill='%23ffffff' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e");
	}

	.custom-file-label {
		color: $form-color;
		background-color: $form-bg;
		border-color: $form-border;

		&:after {
			color: $form-addon-color;
			background-color: $form-addon-bg;
		}
	}

	.input-group-text {
		color: $form-addon-color;
		background-color: $form-addon-bg;
		border-color: $form-border;
	}

	.page-item .page-link {
		border-color: $form-border;
	}

	.page-item.disabled .page-link {
		background-color: $form-bg;
		color: $form-color;
	}

	.page-item:not(.active) .page-link {
		background-color: $form-bg;
	}

	.page-item:not(.active) .page-link:hover {
		background-color: $form-hover-bg;
	}

	// --------------- Navs ---------------

	.breadcrumb {
		background-color: $form-bg;
		border-color: $form-border;
	}

	.nav-tabs {
		border-bottom-color: $form-border;

		.nav-link:focus,
		.nav-link:hover {
			background-color: $form-hover-bg;
			border-color: $form-border;
		}

		.nav-item.show .nav-link,
		.nav-link.active {
			color: $color;
			background-color: $bg;
			border-color: $form-border;
			border-bottom-color: $bg;
		}
	}

	.nav-tabs.card-header-tabs {
		.nav-item.show .nav-link,
		.nav-link.active {
			background-color: $card-bg;
			border-bottom-color: $card-bg;
		}
	}

	// --------------- Alerts ---------------

	@each $color, $value in $theme-colors {
		.alert-#{$color} {
			@include alert-variant(theme-color-level($color, $alert-bg-level), theme-color-level($color, $alert-border-level), theme-color-level($color, $alert-color-level));
		}
	}

	// --------------- Popovers ---------------

	.popover {
		background-color: $window-bg;
		border-color: $window-border;
	}

	.popover-body {
		color: $color;
	}

	.popover-header {
		background-color: $window-header-bg;
		border-bottom-color: $window-border;
	}

	@each $pos in (top, right, bottom, left) {
		.bs-popover-#{$pos},
		.bs-popover-auto[x-placement^="#{$pos}"] {
			& > .arrow::before {
				border-#{$pos}-color: $window-border;
			}

			& > .arrow::after {
				border-#{$pos}-color: $window-bg;
			}
		}
	}

	// --------------- Progress Bars --------------- */

	.progress {
		background-color: $form-bg;
		border-color: $form-border;
	}

	// --------------- Modals ---------------

	.close {
		color: $color;
		opacity: 1;
	}

	.modal-header,
	.modal-footer {
		color: $window-header-color;
		background-color: $window-header-bg;
		border-bottom-color: $window-border;
		border-top-color: $window-border;
	}

	.modal-content {
		color: $window-color;
		background-color: $window-bg;
		border-color: $card-border;
	}

	// --------------- Borders ---------------

	.border { border-color: $default-border; }
	.border-top { border-top-color: $default-border; }
	.border-right { border-right-color: $default-border; }
	.border-bottom { border-bottom-color: $default-border; }
	.border-left { border-left-color: $default-border; }
}

@media (prefers-color-scheme: dark) {
	[data-theme=auto] {
		@include darkmode;
	}
}

[data-theme=dark] {
	@include darkmode;
}
